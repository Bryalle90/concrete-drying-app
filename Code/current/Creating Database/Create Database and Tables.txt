CREATE DATABASE plasticcracks;

USE plasticcracks;
CREATE TABLE zipinfo (
	zipcode int NOT NULL,
	city varchar(40),
	state varchar(40),
	latitude float,
	longitude float,
	PRIMARY KEY(zipcode)
);

USE plasticcracks;
LOAD DATA INFILE '/home/s002457/download/zipinfo.csv'
IGNORE INTO TABLE zipinfo
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 ROWS
(zipcode, city, state, latitude, longitude);

USE plasticcracks;
DELETE FROM zipinfo WHERE zipcode = 0;

USE plasticcracks;
CREATE TABLE project (
	projectID int UNIQUE NOT NULL AUTO_INCREMENT,
	projectName varchar(40),
	location varchar(40),
	ownerID int NOT NULL,
	zipcode int,
	unit varchar(1),
	addedTime varchar(16),
	PRIMARY KEY(projectID)
);

USE plasticcracks;
CREATE TABLE user (
	userID int UNIQUE NOT NULL AUTO_INCREMENT,
	name varchar(40),
	email varchar(254),
	userPass varchar(80),
	code varchar(60),
	forgotCode varchar(60),
	createdTime varchar(16),
	isAdmin char(1),
	isValidated tinyint(1),
	seenNotifMsg tinyint(1),
	forceNewPass tinyint(1),
	PRIMARY KEY(userID)
);

USE plasticcracks;
CREATE TABLE userProjectLookup (
	userID int NOT NULL,
	projectID int NOT NULL,
	accepted tinyint(1),
	PRIMARY KEY(userID, projectID)
);

USE plasticcracks;
CREATE TABLE weather (
	zipcode int NOT NULL,
	evapRate double,
	cloudCoverage double,
	airTemp double,
	concTemp double,
	humidity double,
	windSpeed double,
	weatherTime varchar(16),
	PRIMARY KEY(zipcode, weatherTime)
);

USE plasticcracks;
CREATE TABLE zipUpdate (
	zipcode int NOT NULL,
	updateTime varchar(16),
	PRIMARY KEY(zipcode)
);
